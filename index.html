<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WTA Tennis EDA Dashboard</title>

  <link rel="stylesheet" href="style.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
</head>

<body>
  <header>
    <h1>WTA Tennis EDA Dashboard</h1>
    <p class="subtitle">Exploratory Data Analysis of Women's Tennis Matches (2006–2025)</p>
  </header>

  <nav>
    <button class="tab active" data-tab="overview">Overview</button>
    <button class="tab" data-tab="distributions">Distributions</button>
    <button class="tab" data-tab="correlations">Correlations</button>
    <button class="tab" data-tab="players">Players</button>
  </nav>

  <main>

    <!-- === OVERVIEW === -->
    <section id="overview" class="tab-content active">
      <h2>Dataset Overview</h2>

      <div id="datasetInfo" class="dataset-info">Loading dataset summary...</div>

      <p>
        This dataset contains records of Women's Tennis Association (WTA) matches.  
        Each row represents a single match. <strong>Player&nbsp;1</strong> is normalized to be the <strong>favourite</strong>
        (lower WTA ranking or lower bookmaker odds).
      </p>

      <!-- Column descriptions -->
      <table class="info-table">
        <thead><tr><th>Column</th><th>Description</th></tr></thead>
        <tbody>
          <tr><td><strong>Tournament</strong></td><td>Name of the tournament <span class="badge optional">optional</span></td></tr>
          <tr><td><strong>Date</strong></td><td>Match date (used to derive <code>year</code>)</td></tr>
          <tr><td><strong>Court</strong></td><td>Indoor / Outdoor</td></tr>
          <tr><td><strong>Surface</strong></td><td>Surface type: hard, clay, grass</td></tr>
          <tr><td><strong>Round</strong></td><td>Tournament stage (e.g., R32, QF, SF, F)</td></tr>

          <tr><td><strong>Best of</strong></td><td>Sets per match (WTA is usually Bo3) <span class="badge optional">optional</span></td></tr>

          <tr><td><strong>Player_1 / Player_2</strong></td><td>Competitor names — Player_1 is the favourite <span class="badge optional">optional (ID)</span></td></tr>
          <tr><td><strong>Winner</strong></td><td>Winner name (reveals outcome) <span class="badge leakage">leakage</span></td></tr>

          <tr><td><strong>Rank_1 / Rank_2</strong></td><td>Official WTA rankings (lower rank is stronger)</td></tr>
          <tr><td><strong>Pts_1 / Pts_2</strong></td><td>WTA ranking points</td></tr>
          <tr><td><strong>Odd_1 / Odd_2</strong></td><td>Bookmaker odds (smaller ⇒ higher implied win probability)</td></tr>

          <tr><td><strong>Score</strong></td><td>Final score (reveals outcome) <span class="badge leakage">leakage</span> <span class="badge optional">optional</span></td></tr>

          <tr><td><strong>y</strong></td><td>Target: 1 = favourite (Player_1) won, 0 = lost</td></tr>
          <tr><td><strong>year</strong></td><td>Calendar year (derived from Date) <span class="badge derived">derived</span> <span class="badge optional">optional</span></td></tr>

          <tr><td><strong>rank_diff</strong></td><td><code>Rank_2 − Rank_1</code> — positive ⇒ favourite stronger by rank <span class="badge derived">derived</span></td></tr>
          <tr><td><strong>pts_diff</strong></td><td><code>Pts_1 − Pts_2</code> — positive ⇒ favourite has more points <span class="badge derived">derived</span></td></tr>
          <tr><td><strong>odd_diff</strong></td><td><code>Odd_2 − Odd_1</code> — positive ⇒ favourite has lower odds <span class="badge derived">derived</span></td></tr>

          <!-- NEW FEATURES -->
          <tr><td><strong>h2h_advantage</strong></td>
              <td>Head-to-head advantage before the match: <code>+1</code> = Player_1 leads, <code>−1</code> = Player_2 leads, <code>0</code> = even or no prior meetings <span class="badge derived">derived</span></td></tr>
          <tr><td><strong>last_winner</strong></td>
              <td>Result of their last mutual match: <code>+1</code> = Player_1 won, <code>−1</code> = Player_2 won, <code>0</code> = first meeting <span class="badge derived">derived</span></td></tr>
          <tr><td><strong>surface_winrate_adv</strong></td>
              <td>Difference in historical win rates on this surface (<code>Player_1 − Player_2</code>) before the match; range roughly <code>[−1, 1]</code> <span class="badge derived">derived</span></td></tr>
        </tbody>
      </table>

      <div class="card">
        <canvas id="missingChart"></canvas>
      </div>
    </section>

    <!-- === DISTRIBUTIONS === -->
    <section id="distributions" class="tab-content">
      <h2>Feature Distributions</h2>
      <p>Select a numeric feature to see its histogram.</p>
      <div id="featureButtons" class="feature-buttons"></div>
      <div class="card"><canvas id="distChart"></canvas></div>
    </section>

    <!-- === CORRELATIONS === -->
    <section id="correlations" class="tab-content">
      <h2>Feature Correlations</h2>
      <p>Correlation matrix for numeric features. Green = positive, Red = negative.</p>
      <div class="card" id="corrContainer"></div>
    </section>

    <!-- === PLAYERS === -->
    <section id="players" class="tab-content">
      <h2>Player Statistics</h2>
      <p>Top 10 players by number of matches and their win rates.</p>
      <div class="card"><canvas id="topPlayersChart"></canvas></div>
      <div class="card"><canvas id="winRatePlayersChart"></canvas></div>
    </section>

  </main>

  <script src="charts.js"></script>

  <script>
    // Tab switching logic
    document.querySelectorAll(".tab").forEach(btn => {
      btn.addEventListener("click", () => {
        document.querySelectorAll(".tab").forEach(b => b.classList.remove("active"));
        document.querySelectorAll(".tab-content").forEach(sec => sec.classList.remove("active"));
        btn.classList.add("active");
        document.getElementById(btn.dataset.tab).classList.add("active");
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    });
  </script>
</body>
</html>
