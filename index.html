<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WTA Tennis EDA Dashboard</title>

  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
</head>

<body>
  <header>
    <h1>WTA Tennis EDA Dashboard</h1>
    <p class="subtitle">Exploratory Data Analysis of Women's Tennis Matches (2006–2025)</p>
  </header>

  <nav>
    <button class="tab active" data-tab="overview">Overview</button>
    <button class="tab" data-tab="distributions">Distributions</button>
    <button class="tab" data-tab="correlations">Correlations</button>
    <button class="tab" data-tab="players">Players</button>
    <button class="tab" data-tab="featureimpact">Feature Impact</button>
  </nav>

  <main>

    <!-- === OVERVIEW === -->
    <section id="overview" class="tab-content active">
      <h2>Dataset Overview</h2>

      <div id="datasetInfo" class="dataset-info">Loading dataset summary...</div>

      <p>
        This dataset contains records of Women's Tennis Association (WTA) matches played between 2006 and 2025.  
        Each row represents a single match. <strong>Player&nbsp;1</strong> is always the <strong>favourite</strong> 
        (lower ranking or lower bookmaker odds).
      </p>

      <!-- Column descriptions -->
      <table class="info-table">
        <thead><tr><th>Column</th><th>Description</th></tr></thead>
        <tbody>
          <tr><td><strong>Tournament</strong></td><td>Name of the tournament <span class="badge optional">optional</span></td></tr>
          <tr><td><strong>Date</strong></td><td>Match date (used to derive <code>year</code>)</td></tr>
          <tr><td><strong>Court</strong></td><td>Indoor / Outdoor</td></tr>
          <tr><td><strong>Surface</strong></td><td>Surface type: hard, clay, grass</td></tr>
          <tr><td><strong>Round</strong></td><td>Tournament stage (e.g., R32, QF, SF, F)</td></tr>
          <tr><td><strong>Player_1 / Player_2</strong></td><td>Competitor names — Player_1 is the favourite</td></tr>
          <tr><td><strong>Rank_1 / Rank_2</strong></td><td>Official WTA rankings (lower is better)</td></tr>
          <tr><td><strong>Pts_1 / Pts_2</strong></td><td>WTA ranking points</td></tr>
          <tr><td><strong>Odd_1 / Odd_2</strong></td><td>Bookmaker odds (smaller ⇒ higher win probability)</td></tr>
          <tr><td><strong>y</strong></td><td>Target: 1 = favourite (Player_1) won, 0 = lost</td></tr>
          <tr><td><strong>rank_diff / pts_diff / odd_diff</strong></td><td>Derived numeric differences for modeling</td></tr>
          <tr><td><strong>h2h_advantage</strong></td><td>1 if Player_1 had more wins in head-to-head history</td></tr>
          <tr><td><strong>last_winner</strong></td><td>1 if Player_1 won their most recent meeting</td></tr>
          <tr><td><strong>surface_winrate_adv</strong></td><td>Winrate advantage of Player_1 on given surface</td></tr>
        </tbody>
      </table>

      <div class="card">
        <canvas id="missingChart"></canvas>
      </div>
    </section>

    <!-- === DISTRIBUTIONS === -->
    <section id="distributions" class="tab-content">
      <h2>Feature Distributions</h2>
      <p>Explore how numeric variables are distributed across all matches.</p>
      <div id="featureButtons" class="feature-buttons"></div>
      <div class="card"><canvas id="distChart"></canvas></div>
    </section>

    <!-- === CORRELATIONS === -->
    <section id="correlations" class="tab-content">
      <h2>Feature Correlations</h2>
      <p>Correlation matrix for numeric features. Green = positive, Red = negative.</p>
      <div class="card" id="corrContainer"></div>
    </section>

    <!-- === PLAYERS === -->
    <section id="players" class="tab-content">
      <h2>Player Statistics</h2>
      <p>Top 10 players by number of matches and their win rates.</p>
      <div class="card"><canvas id="topPlayersChart"></canvas></div>
      <div class="card"><canvas id="winRatePlayersChart"></canvas></div>
    </section>

    <!-- === FEATURE IMPACT === -->
    <section id="featureimpact" class="tab-content">
      <h2>Feature Impact</h2>
      <p>Correlation of each feature with the match outcome (target <code>y</code>).</p>
      <div class="card"><canvas id="featureImpactChart"></canvas></div>
    </section>

  </main>

  <script src="charts.js"></script>

  <script>
    // Tab switching logic (fixed)
    document.querySelectorAll(".tab").forEach(btn => {
      btn.addEventListener("click", () => {
        // deactivate all tabs and sections
        document.querySelectorAll(".tab").forEach(b => b.classList.remove("active"));
        document.querySelectorAll(".tab-content").forEach(sec => sec.classList.remove("active"));
        // activate selected
        btn.classList.add("active");
        document.getElementById(btn.dataset.tab).classList.add("active");
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    });
  </script>
</body>
</html>
